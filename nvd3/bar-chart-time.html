<!DOCTYPE html>
<html>
<head>
	<title></title>
	<link rel="stylesheet" type="text/css" href="../css/nv.d3.css">
	<style type="text/css">
	#box{width: 50%; height: 300px;}
	</style>
	<script type="text/javascript" src="../js/d3.js"></script>
	<script type="text/javascript" src="../js/nv.d3.js"></script>
	<script>
	window.onload = function() {
		var data = [
			{
				'key': '1号线',
				'values': [
					{'x': 1138683600000, 'y': 1},
					{'x': 1141102800000, 'y': 2},
					{'x': 1143781200000, 'y': 3},
					{'x': 1146369600000, 'y': 5},
					{'x': 1149048000000, 'y': 2}
				]
			},
			{
				'key': '2号线',
				'values': [
					{'x': 1138683600000, 'y': 3},
					{'x': 1141102800000, 'y': 1},
					{'x': 1143781200000, 'y': 4},
					{'x': 1146369600000, 'y': 3},
					{'x': 1149048000000, 'y': 4}
				]
			},
			{
				'key': '3号线',
				'values': [
					{'x': 1138683600000, 'y': 3},
					{'x': 1141102800000, 'y': 7},
					{'x': 1143781200000, 'y': 5},
					{'x': 1146369600000, 'y': 4},
					{'x': 1149048000000, 'y': 6}
				]
			},
			{
				'key': '4号线',
				'values': [
					{'x': 1138683600000, 'y': 6},
					{'x': 1141102800000, 'y': 7},
					{'x': 1143781200000, 'y': 9},
					{'x': 1146369600000, 'y': 4},
					{'x': 1149048000000, 'y': 2}
				]
			},
			{
				'key': '5号线',
				'values': [
					{'x': 1138683600000, 'y': 4},
					{'x': 1141102800000, 'y': 6},
					{'x': 1143781200000, 'y': 9},
					{'x': 1146369600000, 'y': 5},
					{'x': 1149048000000, 'y': 6}
				]
			},
			{
				'key': '6号线',
				'values': [
					{'x': 1138683600000, 'y': 1},
					{'x': 1141102800000, 'y': 1},
					{'x': 1143781200000, 'y': 3},
					{'x': 1146369600000, 'y': 5},
					{'x': 1149048000000, 'y': 6}
				]
			},
			{
				'key': '7号线',
				'values': [
					{'x': 1138683600000, 'y': 4},
					{'x': 1141102800000, 'y': 6},
					{'x': 1143781200000, 'y': 3},
					{'x': 1146369600000, 'y': 1},
					{'x': 1149048000000, 'y': 2}
				]
			},
			{
				'key': '8号线',
				'values': [
					{'x': 1138683600000, 'y': 8},
					{'x': 1141102800000, 'y': 7},
					{'x': 1143781200000, 'y': 6},
					{'x': 1146369600000, 'y': 5},
					{'x': 1149048000000, 'y': 4}
				]
			},
			{
				'key': '9号线',
				'values': [
					{'x': 1138683600000, 'y': 6},
					{'x': 1141102800000, 'y': 2},
					{'x': 1143781200000, 'y': 3},
					{'x': 1146369600000, 'y': 5},
					{'x': 1149048000000, 'y': 8}
				]
			},
			{
				'key': '10号线',
				'values': [
					{'x': 1138683600000, 'y': 8},
					{'x': 1141102800000, 'y': 1},
					{'x': 1143781200000, 'y': 4},
					{'x': 1146369600000, 'y': 4},
					{'x': 1149048000000, 'y': 5}
				]
			},
			{
				'key': '11号线',
				'values': [
					{'x': 1138683600000, 'y': 2},
					{'x': 1141102800000, 'y': 5},
					{'x': 1143781200000, 'y': 3},
					{'x': 1146369600000, 'y': 2},
					{'x': 1149048000000, 'y': 1}
				]
			},
			{
				'key': '12号线',
				'values': [
					{'x': 1138683600000, 'y': 2},
					{'x': 1141102800000, 'y': 4},
					{'x': 1143781200000, 'y': 6},
					{'x': 1146369600000, 'y': 7},
					{'x': 1149048000000, 'y': 8}
				]
			}
		];
		nv.addGraph(function() {
		    chart = nv.models.multiBarChart()
		        // .barColor(nv.utils.defaultColor())
		        .duration(250)
		        .showControls(true) // dw+是否显示堆叠控制
		        .showLegend(true) // dw+是否显示图例
		        // .legendPosition("bottom")
		        // .controlsPosition("bottom")
		        .margin({left: 100})
		        .stacked(true); // dw+默认显示堆叠

		    chart.xAxis.tickFormat(function(d) { return d3.time.format('%Y-%m-%d')(new Date(d)) });
		    chart.yAxis.tickFormat(d3.format(',.2f'));

		    chart.yAxis.axisLabel('Y Axis');
		    chart.xAxis.axisLabel('X Axis').axisLabelDistance(20);

		    d3.select('#box').append('svg')
		        .datum(data)
		        .call(chart);

		    nv.utils.windowResize(chart.update);

		    chart.dispatch.on('stateChange', function(e) { nv.log('New State:', JSON.stringify(e)); });
		    chart.state.dispatch.on('change', function(state){
		        nv.log('state', JSON.stringify(state));
		    });
		    return chart;
		});
	};
	</script>
</head>
<body>
<div id="box"></div>
</body>
</html>